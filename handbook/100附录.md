# 附录

## 在 groovy 脚本中发起 POST 请求

groovy

```groovy
import java.net.URL
import java.net.HttpURLConnection
import java.util.Base64
import java.io.OutputStreamWriter
import org.json.JSONObject;
import org.json.JSONArray;
import org.apache.commons.io.IOUtils;

if(!beforeEvent) return

def url = new URL("http://localhost:8080/rest/item")
def conn = (HttpURLConnection)url.openConnection()
conn.setRequestMethod("POST")
logger.info("${conn.requestMethod} $url")

// 有请求体的必须设置为true
conn.setDoOutput(true)

// Request Headers
conn.setRequestProperty("Content-Type","application/json;charset=UTF-8")
def base64 = Base64.getEncoder().encode(("bond:007").getBytes())
conn.setRequestProperty("Authorization","Basic " + new String(base64))

// Request Body
def requestBody = new JSONObject();
requestBody.put("tracker", "/project/3/tracker/3383");
requestBody.put("type", "Folder");
requestBody.put("name", "文件夹");
requestBody.put("description", "--");
logger.info("requestBody = $requestBody")

def writer = new OutputStreamWriter(conn.getOutputStream(), "UTF-8")
writer.write(requestBody.toString())
writer.flush()
writer.close()

logger.info("http.status = ${conn.responseCode}")
// Response Body
def responseBody = IOUtils.toString(conn.getInputStream(), "UTF-8")
```



## 在 groovy 脚本中发起 GET 请求

groovy

```groovy
import java.net.URL
import java.net.HttpURLConnection
import java.util.Base64
import java.io.OutputStreamWriter
import org.json.JSONObject;
import org.json.JSONArray;
import org.apache.commons.io.IOUtils;

if(!beforeEvent) return

def url = new URL("http://localhost:8080/rest/item/1002")
def conn = (HttpURLConnection)url.openConnection()
// Request Method
conn.setRequestMethod("GET")
logger.info("GET $url")

// Request Headers
def base64 = Base64.getEncoder().encode(("bond:007").getBytes())
conn.setRequestProperty("Authorization","Basic " + new String(base64))

logger.info("http.status = ${conn.responseCode}")
// Response Body
def responseBody = IOUtils.toString(conn.getInputStream(), "UTF-8")
```



## 在 groovy 脚本中发起 PUT 请求

groovy

```groovy
import java.net.URL
import java.net.HttpURLConnection
import java.util.Base64
import java.io.OutputStreamWriter
import org.json.JSONObject;
import org.json.JSONArray;
import org.apache.commons.io.IOUtils;

if(!beforeEvent) return

def url = new URL("http://localhost:8080/rest/item")
def conn = (HttpURLConnection)url.openConnection()
conn.setRequestMethod("PUT")
logger.info("${conn.requestMethod} $url")

// 有请求体的必须设置为true
conn.setDoOutput(true)

// Request Headers
def base64 = Base64.getEncoder().encode(("bond:007").getBytes())
conn.setRequestProperty("Authorization","Basic " + new String(base64))
conn.setRequestProperty("Content-Type","application/json;charset=UTF-8")

// Request Body
def requestBody = new JSONObject();
requestBody.put("uri", "/item/1002");
requestBody.put("name", "重命名");
logger.info("requestBody = $requestBody")

def writer = new OutputStreamWriter(conn.getOutputStream(), "UTF-8")
writer.write(requestBody.toString())
writer.flush()
writer.close()

logger.info("http.status = ${conn.responseCode}")
// Response Body
def responseBody = IOUtils.toString(conn.getInputStream(), "UTF-8")
```



## 在 groovy 脚本中发起 DELETE 请求

groovy

```groovy
import java.net.URL
import java.net.HttpURLConnection
import java.util.Base64
import java.io.OutputStreamWriter
import org.json.JSONObject;
import org.json.JSONArray;
import org.apache.commons.io.IOUtils;

if(!beforeEvent) return

def url = new URL("http://localhost:8080/rest/item/1002")
def conn = (HttpURLConnection)url.openConnection()
conn.setRequestMethod("DELETE")
logger.info("${conn.requestMethod} $url")

// Request Headers
def base64 = Base64.getEncoder().encode(("bond:007").getBytes())
conn.setRequestProperty("Authorization","Basic " + new String(base64))

logger.info("http.status = ${conn.responseCode}")
// Response Body
def responseBody = IOUtils.toString(conn.getInputStream(), "UTF-8")
```

